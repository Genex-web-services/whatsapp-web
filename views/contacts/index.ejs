<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>

<!-- DataTables CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<%- include('../partials/sidebar') %>

<main class="dashboard-main bg-gray-100">
  <%- include('../partials/navbar') %>

  <div class="dashboard-main-body bg-gray-100 dark:bg-neutral-800 min-h-screen p-6">

    <!-- Contacts Header -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Contacts</h2>
      <div class="space-x-2">
       <button id="openSingleModalBtn" class="btn btn-primary me-2">Open Single Upload Modal</button>
  <button id="openBulkModalBtn" class="btn btn-warning">Open Bulk Upload Modal</button>
      </div>
    </div>

    <!-- Contacts Table -->
    <div class="overflow-auto rounded-lg shadow bg-white dark:bg-neutral-700 p-4">
      <table id="contactsTable" class="w-full text-sm display">
        <thead class="bg-gray-200 dark:bg-neutral-600">
          <tr>
            <th class="px-4 py-2">Name</th>
            <th class="px-4 py-2">Phone</th>
            <th class="px-4 py-2">Email</th>
            <th class="px-4 py-2">Group</th>
            <th class="px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Example row -->
          <tr>
            <td class="px-4 py-2">John Doe</td>
            <td class="px-4 py-2">+1234567890</td>
            <td class="px-4 py-2">john@example.com</td>
            <td class="px-4 py-2">Marketing</td>
            <td class="px-4 py-2 space-x-2">
              <button class="text-blue-600 hover:underline">Edit</button>
              <button class="text-red-600 hover:underline">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

 <!-- Single Upload Modal -->
  <div class="modal fade" id="singleUploadModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="singleUploadForm" enctype="multipart/form-data">
        <div class="modal-header">
          <h5 class="modal-title">Single Media Upload</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="text" name="project_id" class="form-control mb-3" value="<%= userId %>" required>
          <input type="text" name="tenant_id" class="form-control mb-3" value="<%= user.tenantId %>" required>
          <input type="file" name="media" class="form-control mb-3" required>
          <input type="text" name="title" class="form-control mb-3" placeholder="Title" required>
          <input type="text" name="description" class="form-control mb-3" placeholder="Description">
          
          <!-- Added fields below -->
          <input type="text" name="phone" class="form-control mb-3" placeholder="Phone" required>
          <input type="email" name="email" class="form-control mb-3" placeholder="Email">
          <input type="text" name="company" class="form-control mb-3" placeholder="Company">
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Upload</button>
        </div>
      </form>
    </div>
  </div>
</div>


  <!-- Bulk Upload Modal -->
  <div class="modal fade" id="bulkUploadModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="bulkUploadForm" enctype="multipart/form-data">
          <div class="modal-header">
            <h5 class="modal-title">Bulk Media Upload</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input type="file" name="excel_file" accept=".xlsx, .xls" class="form-control mb-3" required>
            <div class="alert alert-info">
              Upload Excel File (with title, description, and image link)
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-warning">Upload Excel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS + Modal Handler -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Single Modal Trigger
    document.getElementById('openSingleModalBtn').addEventListener('click', function () {
      const modal = new bootstrap.Modal(document.getElementById('singleUploadModal'));
      modal.show();
    });

    // Bulk Modal Trigger
    document.getElementById('openBulkModalBtn').addEventListener('click', function () {
      const modal = new bootstrap.Modal(document.getElementById('bulkUploadModal'));
      modal.show();
    });

    // Optional: Form Submission (use your backend endpoint)
    document.getElementById('singleUploadForm').addEventListener('submit', function (e) {
      e.preventDefault();
      alert('Single upload submitted');
    });

    document.getElementById('bulkUploadForm').addEventListener('submit', function (e) {
      e.preventDefault();
      alert('Bulk upload submitted');
    });
  </script>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#contactsTable').DataTable({
        responsive: true,
        pageLength: 10,
        ordering: true,
        language: {
          searchPlaceholder: "Search contacts..."
        }
      });
    });
  </script>

  <%- include('../partials/footer') %>
  <%- include('../partials/script') %>
</main>
</body>
</html>
