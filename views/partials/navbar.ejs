<div class="navbar-header border-b border-neutral-200 dark:border-neutral-600">
    <div class="flex items-center justify-between">
        <div class="col-auto">
            <div class="flex flex-wrap items-center gap-[16px]">
                <button type="button" class="sidebar-toggle">
                    <iconify-icon icon="heroicons:bars-3-solid" class="icon non-active"></iconify-icon>
                    <iconify-icon icon="iconoir:arrow-right" class="icon active"></iconify-icon>
                </button>
                <button type="button" class="sidebar-mobile-toggle d-flex !leading-[0]">
                    <iconify-icon icon="heroicons:bars-3-solid" class="icon !text-[30px]"></iconify-icon>
                </button>
                <form class="navbar-search">
                    <input type="text" name="search" placeholder="Search">
                    <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
                </form>

            </div>
        </div>
        <div class="col-auto">
            <div class="flex flex-wrap items-center gap-3">
                <button type="button" id="theme-toggle" class="w-10 h-10 bg-neutral-200 dark:bg-neutral-700 dark:text-white rounded-full flex justify-center items-center">
                    <span id="theme-toggle-dark-icon" class="hidden">
                        <i class="ri-sun-line"></i>
                    </span>
                    <span id="theme-toggle-light-icon" class="hidden">
                        <i class="ri-moon-line"></i>
                    </span>
                </button>

                <!-- Language Dropdown Start  -->
                <div class="hidden sm:inline-block">
                    <button data-dropdown-toggle="dropdownInformation" class="has-indicator w-10 h-10 bg-neutral-200 dark:bg-neutral-700 dark:text-white rounded-full flex justify-center items-center" type="button">
                        <img src="<%= env.Assets_URL%>images/lang-flag.png" alt="image" class="w-6 h-6 object-cover rounded-full">
                    </button>
                    <div id="dropdownInformation" class="z-10 hidden bg-white dark:bg-neutral-700 rounded-lg shadow-lg dropdown-menu-sm p-3">
                        <div class="py-3 px-4 rounded-lg bg-primary-50 dark:bg-primary-600/25 mb-4 flex items-center justify-between gap-2">
                            <div>
                                <h6 class="text-lg text-neutral-900 font-semibold mb-0">Choose Your Language</h6>
                            </div>
                        </div>
<script>
    const languages = [
  { id: 'english', label: 'English', code: 'en' },
  { id: 'hindi', label: 'Hindi', code: 'hi' },
  { id: 'bengali', label: 'Bengali', code: 'bn' },
  { id: 'tamil', label: 'Tamil', code: 'ta' },
  { id: 'telugu', label: 'Telugu', code: 'te' },
  { id: 'marathi', label: 'Marathi', code: 'mr' },
  { id: 'gujarati', label: 'Gujarati', code: 'gu' },
  { id: 'kannada', label: 'Kannada', code: 'kn' },
  { id: 'urdu', label: 'Urdu', code: 'ur' }
];

</script>
<div id="google_translate_element" style="display:none;"></div>
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,hi,bn,ta,te,mr,gu,kn,ur',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
    function changeLanguage(langCode) {
  const selectField = document.querySelector("select.goog-te-combo");
  if (!selectField) return alert("Translation dropdown not loaded yet");

  selectField.value = langCode;
  selectField.dispatchEvent(new Event("change"));
}

// Add listener to radio buttons
languages.forEach(lang => {
  const radio = document.getElementById(lang.id);
  if (radio) {
    radio.addEventListener("change", () => {
      changeLanguage(lang.code);
    });
  }
});

</script>
<style>
    .goog-te-banner-frame, .goog-logo-link, .goog-te-gadget {
  display: none !important;
}

</style>
                    </div>
                </div>
                <!-- Language Dropdown End  -->
                 <style>
  /* Hide Google Translate banner and logo */
  .goog-te-banner-frame.skiptranslate,
  .goog-logo-link,
  .goog-te-gadget span {
    display: none !important;
  }

  body {
    top: 0px !important;
  }

  /* Hide Google Translate dropdown menu iframe */
  .goog-te-menu-frame {
    display: none !important;
  }
</style>

<script>
  // Map your radio input IDs to Google Translate language codes
  const langMap = {
    english: 'en',
    japan: 'ja',
    french: 'fr',
    germany: 'de',
    southkorea: 'ko',
    bangladesh: 'bn',
    hindi: 'hi',
    korea: 'ko'
  };

function waitForGoogleTranslateIframe(callback, maxAttempts = 20, interval = 300) {
  let attempts = 0;

  const checkIframe = () => {
    const iframe = document.querySelector('iframe.goog-te-menu-frame');
    if (iframe) {
      callback(iframe);
    } else if (attempts < maxAttempts) {
      attempts++;
      setTimeout(checkIframe, interval);
    } else {
      alert("Google Translate is still loading. Please wait a moment.");
    }
  };

  checkIframe();
}


document.querySelectorAll('input[name="language"]').forEach((radio) => {
  radio.addEventListener('change', function () {
    const langCode = langMap[this.id.toLowerCase()];
    if (!langCode) return;

    waitForGoogleTranslateIframe((translateFrame) => {
      const innerDoc = translateFrame.contentDocument || translateFrame.contentWindow.document;
      const langItems = innerDoc.querySelectorAll('.goog-te-menu2-item span.text');

      const languageNames = {
        en: 'english',
        hi: 'hindi',
        ja: 'japanese',
        fr: 'french',
        de: 'german',
        ko: 'korean',
        bn: 'bengali'
      };

      for (const el of langItems) {
        if (el.innerText.toLowerCase() === languageNames[langCode]) {
          el.click();
          break;
        }
      }
    });
  });
});

</script>

<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,hi,ta,te,bn,ml,kn,gu,mr,pa,ur,ja,fr,de,ko',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');
  }
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


                <!-- Message Dropdown End  -->
                <!-- Notification Start  -->
                <button data-dropdown-toggle="dropdownNotification" class="has-indicator w-10 h-10 bg-neutral-200 dark:bg-neutral-700 rounded-full flex justify-center items-center" type="button">
                    <iconify-icon icon="iconoir:bell" class="text-neutral-900 dark:text-white text-xl"></iconify-icon>
                </button>
                <div id="dropdownNotification" class="z-10 hidden bg-white dark:bg-neutral-700 rounded-2xl overflow-hidden shadow-lg max-w-[394px] w-full">
  <div class="py-3 px-4 rounded-lg bg-primary-50 dark:bg-primary-600/25 m-4 flex items-center justify-between gap-2">
    <h6 class="text-lg text-neutral-900 font-semibold mb-0">Notification</h6>
    <span class="w-10 h-10 bg-white dark:bg-neutral-600 text-primary-600 dark:text-white font-bold flex justify-center items-center rounded-full">
      <%= notifications.length %>
    </span>
  </div>

  <div class="scroll-sm !border-t-0">
    <div class="max-h-[400px] overflow-y-auto">
      <% notifications.forEach(notif => { %>
        <a target="_blank" href="<%= notif.redirect_uri || '#' %>" class="flex px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-600 justify-between gap-1">
          <div class="flex items-center gap-3">
            <div class="flex-shrink-0 relative">
              <% if (notif.image) { %>
                <img class="rounded-full w-11 h-11" src="<%= notif.image %>" alt="<%= notif.senderName %> image">
              <% } else { %>
                <div class="w-11 h-11 rounded-full flex justify-center items-center bg-primary-100 dark:bg-primary-600/25 text-primary-600 font-semibold">
                  <%= (notif.senderName || 'NA')[0] %>
                </div>
              <% } %>
            </div>
            <div>
              <h6 class="text-sm fw-semibold mb-1"><%= notif.senderName %></h6>
              <p class="mb-0 text-sm line-clamp-1"><%= notif.message %></p>
            </div>
          </div>
          <div class="shrink-0">
            <span class="text-sm text-neutral-500"><%= notif.timeAgo || 'Just now' %></span>
          </div>
        </a>
      <% }) %>
    </div>

    <div class="text-center py-3 px-4">
      <a href="https://admin.gws365.in/notifications" class="text-primary-600 dark:text-primary-600 font-semibold hover:underline text-center">
        See All Notifications
      </a>
    </div>
  </div>
</div>

                <!-- Notification End  -->

<!-- Message Dropdown Start  -->
                <button data-dropdown-toggle="dropdownMessage" class="has-indicator w-10 h-10 bg-neutral-200 dark:bg-neutral-700 rounded-full flex justify-center items-center" type="button">
                    <iconify-icon icon="mynaui:grid" class="text-neutral-900 dark:text-white text-xl"></iconify-icon>
                </button>
                <div id="dropdownMessage" class="z-10 hidden bg-white dark:bg-neutral-700 rounded-2xl overflow-hidden shadow-lg max-w-[394px] w-full">
  <div class="py-3 px-4 rounded-lg bg-primary-50 dark:bg-primary-600/25 m-4 flex items-center justify-between gap-2">
    <h6 class="text-lg text-neutral-900 font-semibold mb-0">Message</h6>
    <span class="w-10 h-10 bg-white dark:bg-neutral-600 text-primary-600 dark:text-white font-bold flex justify-center items-center rounded-full">
      <%= products?.length.toString().padStart(2, '0') || '00' %>
    </span>
  </div>

  <div class="scroll-sm !border-t-0 px-4">
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[400px] overflow-y-auto ">
    <% products.forEach(product => { %>
      <a target="_blank" href="<%= product.redirect_uri %>" class="p-4 bg-white dark:bg-neutral-800 border rounded-xl shadow-sm hover:shadow-md transition hover:bg-gray-50 dark:hover:bg-neutral-700 flex flex-col gap-3">
        <div class="flex items-center gap-3">
          <img class="rounded-full w-11 h-11" src="https://assets.genexwebservices.com/images/notification/profile-4.png" alt="<%= product.senderName %> image">
          <div>
            <h6 class="text-sm font-semibold mb-1 text-neutral-800 dark:text-white"><%= product.client_name %></h6>
            <p class="text-sm text-neutral-600 dark:text-neutral-300 line-clamp-2"><%= product.description %></p>
          </div>
        </div>
        <div class="flex items-center justify-between text-sm text-neutral-500 dark:text-neutral-400">
          <span><%= product.time %></span>
          <% if (product.unreadCount > 0) { %>
            <span class="w-5 h-5 text-xs bg-warning-600 text-white rounded-full flex justify-center items-center"><%= product.unreadCount %></span>
          <% } %>
        </div>
      </a>
    <% }) %>
  </div>

  <div class="text-center py-3">
    <a href="https://admin.gws365.in/dashboard" class="text-primary-600 dark:text-primary-400 font-semibold hover:underline">
      See All Products
    </a>
  </div>
</div>

</div>


                <button data-dropdown-toggle="dropdownProfile" class="flex justify-center items-center rounded-full" type="button">
                    <img src="<%= env.Assets_URL%>/images/user.png" alt="image" class="w-10 h-10 object-fit-cover rounded-full">
                </button>
                <div id="dropdownProfile" class="z-10 hidden bg-white dark:bg-neutral-700 rounded-lg shadow-lg dropdown-menu-sm p-3">
                    <div class="py-3 px-4 rounded-lg bg-primary-50 dark:bg-primary-600/25 mb-4 flex items-center justify-between gap-2">
                        <div>
                            <h6 class="text-lg text-neutral-900 font-semibold mb-0"><%= user.name %></h6>
                            <span class="text-neutral-500"><%= user.email %></span>
                        </div>
                        <button type="button" class="hover:text-danger-600">
                            <iconify-icon icon="radix-icons:cross-1" class="icon text-xl"></iconify-icon>
                        </button>
                    </div>

                    <div class="max-h-[400px] overflow-y-auto scroll-sm pe-2">
                        <ul class="flex flex-col">
                            <li>
                                <a class="text-black px-0 py-2 hover:text-primary-600 flex items-center gap-4" href="/users/viewprofile">
                                    <iconify-icon icon="solar:user-linear" class="icon text-xl"></iconify-icon>  My Profile
                                </a>
                            </li>
                            <li>
                                <a class="text-black px-0 py-2 hover:text-primary-600 flex items-center gap-4" href="/email">
                                    <iconify-icon icon="tabler:message-check" class="icon text-xl"></iconify-icon>  Inbox
                                </a>
                            </li>
                            <li>
                                <a class="text-black px-0 py-2 hover:text-primary-600 flex items-center gap-4" href="settings/company">
                                    <iconify-icon icon="icon-park-outline:setting-two" class="icon text-xl"></iconify-icon>  Setting
                                </a>
                            </li>
                            <li>
                                <a class="text-black px-0 py-2 hover:text-danger-600 flex items-center gap-4" href="<%= env.Login_URL%>/api/v1.0/auth/logout?redirect_uri=<%= env.Frontend_URL%>">
                                    <iconify-icon icon="lucide:power" class="icon text-xl"></iconify-icon>  Log Out
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>